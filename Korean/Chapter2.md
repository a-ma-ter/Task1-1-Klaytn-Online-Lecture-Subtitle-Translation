# 2. 블록체인 플랫폼의 약점

## 2.1 확장성

확장성은 플랫폼을 확장하는 것을 의미합니다.
이것은 간단히 얘기하면, 얼마나 빨리 일을 처리할 수 있는지를 의미합니다. 
비트코인이나 이더리움도 확장성 문제를 해결하기 위해 작업을 하고 있듯이 어떻게 해결 될지는 알수 없습니다.
확장성이 무엇인지, 왜 중요한지에 대해 이야기해 보겠습니다.

확장성에 대해서, TPS와 블록 인터벌이라는 용어를 사용하여 정의합니다. 
TPS는 초당 트랜잭션의 약어로 초당 처리할 수 있는 트랜잭션 수를 의미합니다. 
블록 인터벌은 각 블록이 생성되는 시간 간격입니다.

우리는 블록체인 처리속도를 비자와 많이 비교합니다. 비자는 초당 평균 1700건의 거래를 처리하고 있다고 합니다. 
비트코인의 경우 초당 7건의 거래를 처리할 수 있고, 실제로는 2~5건의 거래를 처리할 수 있습니다.
이더리움은 15~20건을 처리하고 있습니다.

비트코인의 블록 인터벌은 10분, 이더리움의 블록 인터벌은 15~20초입니다.
그러므로 이더리움이 20 TPS이고 블록 인터벌이 15초라면 20 x 15이므로 총 300개의 트랜잭션이 한 블록에 있을 것입니다.

여기에서 의문점이 생깁니다.
TPS가 10,000이고 블록 간격이 10분인 블록체인 플랫폼이 있다면 사용자 경험은 어떨까요? 
네, 1초에 1만 건의 거래를 처리하고 블록을 완성하는 데 최대 10분이 걸린다면, 무슨 일이 벌어질까요?
단순히 친구에게 돈을 보내고 싶어서 송금 버튼을 누르면 최대 10분 동안이나 완료 처리가 안될 수 있습니다. 
이것은 말도 안되는 일입니다.
이더리움도 비트코인에 비해 상당히 짧지만 사용자에게 15~20초는 길게 느껴집니다. 
우리는 인터넷에서 5초 안에 어떤 결과도 얻지 못한다면, 매우 불만 스러워합니다.
이런 일은 21세기에 일어나서는 안 됩니다.


그렇다면 기존의 블록체인 속도가 느린 이유를 살펴보겠습니다. 
첫째, 블록체인 네트워크의 특징은 더 많은 노드가 더 빠른 네트워크를 의미하지 않는다는 점으로 특징지어집니다. 
우리가 흔히 이용하는 웹 서비스와 모바일 서비스는 이용자에게 가능한 한 신속하게 대응할 수 있는 서버의 수를 증가시키고, 많은 수의 요청이 도착하면 별도로 배치하여 처리합니다.

그러나 블록체인 네트워크를 구성하는 노드라고 하는 서버는 100개의 작업이 수신되면 100개의 작업을 배포하지 않고 100개의 작업을 처리해야 합니다. 즉, 모든 노드는 같은 것을 반복합니다. 그 결과 전체 네트워크의 성능이 가장 느린 노드로 다운그레이드되고, 컴퓨터의 성능은 수만 개의 서로 다른 네트워크나 컴퓨터의 성능과는 아무런 차이가 없다. 이에 따라 비트코인이나 이더리움 같은 블록체인 네트워크는 대량의 거래를 처리하지 못하고 네트워크 자체가 느려지고 있습니다.


## 2.2 파이널리티의 결여


파이널리티란 변경할 수 없는 최종 상태를 말합니다. 블록체인 내 블록의 파이널리티는 블록 내 거래는 절대 변경할 수 없음을 보장합니다. 그 거래는 모호함 없이 끝났다고 믿어야 합니다. 그러나 비트코인과 이더리움의 채굴 메커니즘은 이러한 파이널리티가 결여되어 있다. 예를 들어, 비트코인으로 비행기표를 사기 위해 지불하면, 그 순간 거래가 만들어 진다. 기록에 남길 수 있는 거래가 만들어진다는 뜻이다. 그러나 이 거래는 바로 처리되지 않는다. 완벽히 보장 하지 않는다. 결국 처리될 확률론적 유한성만을 제공한다. 
그것은 내가 지불을 했다는 것을 의미하지만, 나중에 그것이 지불되지 않을 수도 있다는 것을 알게 될 수도 있다.

이제 평균적으로 파이널리티에 도달하는 데 얼마나 걸리는지 보자.

(표 사진) 

이 표를 보면 비트코인 같은 경우에는 평균적으로 파이널리티 도달 시간이 60분이다.
블록 채굴은 10분이 걸리지만 파이널리티 단계에 도달하는 데는 6단계가 걸려 1시간이 걸린다. 이더리움은 마감까지 6분이 걸립니다. 
이 단계를 검증하면 할수록 거래가 충분히 신뢰될 수 있는 가능성이 높아진다. 그런데 이 검증 단계를 몇 번 거쳐야 되기 때문에 시간이 너무 오래 걸립니다. 암호화폐는 이것 때문에 상품화가 어렵습니다. 당신이 지불을 한 후에, 최종 지불에 걸리는 비율은 너무 이례적이다.
얼마나 많은 사람들이 한 시간 가량을 기다려 줄 수 있을까?
그래서 파이널리티는 매우 중요한 역할을 합니다. 약간의 어려움에, 파이널리티는 거래가 변경될 수 없다는 합리적인 보장을 받기 위해 얼마나 오래 기다려야 하는지를 측정한다.

마지막으로, 블록체인 네트워크에서 오랜 시간을 기다리는 것은 당신의 사업에 상당한 영향을 미칠 수 있기 때문에 빠른 완성도는 중요한 사업 자산입니다. 지금까지 현존하는 대표적인 블록체인들의 파이널리티가 부족한 것에 대해 간략히 설명하였습니다.

## 2.3 포크

포크(fork)는 블록이 둘 이상의 가지로 갈라지는 현상을 말합니다.
블록체인 p2p 네트워크의 모든 참가자가 독립적으로 내 것을 할 수 있기 때문에 포킹이 발생하는 것입니다. 
먼저 비트코인이나 이더리움의 작업증명에 대해서 설명하겠습니다. 
블록체인(blockchain)에 블록을 추가하기 위한 해시값 찾기 문제를 해결한다. 
여러 노드가 경쟁하면서 문제를 해결하려고 한다. 
때때로 두 개의 노드가 비슷한 시간에 문제를 해결한다. 
그런 다음 블록체인에 추가할 후보로 두 블록이 추가된다. 
이때 가지가 일어납니다.

예를 들어, 두 개의 노드에서 마이닝한다고 하면, A 및 B 노드가 있습니다. 
어느날 나는 친구에게 송금을 했다. 
그런 다음 트랜잭션이 발생하여 트랜잭션 풀로 들어간다. 
A, B 노드는 이제 블록을 만들기 위해 트랜잭션 풀에 트랜잭션을 자체 블록으로 배치한다. 
이때 두 노드 모두 내가 친구에게 보낸 트랜잭션을 포함한다.

이 과정이 끝나면 노드는 이제 기존의 블록체인(blockchain)에 자체 블록을 추가하는 문제를 해결하게 된다. 
노드는 어려운 연산 과정을 거쳐야 하며, A와 B 노드 모두 문제를 해결한다. 
그런 다음 노드는 내가 해결한 다른 노드로 전파한다.

이 전파가 발생하면 일부 노드는 노드 A의 보라색 블록을 수신하고 다른 노드는 노드 B의 검은색 블록을 수신한다. 
여기서 세 번째 블록에서와 같이 분기가 발생한다. 
전파 과정에서 보라색 블록을 수신하는 노드도 나중에 검은 블록을 수신한다. 
하지만 그들은 검은 블록을 무시한다. 
왜냐하면 친구에게 보낸 거래는 이미 보라색 블록에 추가되었기 때문이다. 반대로, 블랙 블록을 수신하는 노드는 보라색 블록을 수신할 때 동일한 트랜잭션을 포함하기 때문에 다른 노드를 무시하게 된다.

다음으로 노드 c에서 해시값을 찾아 문제를 해결하고, 네 번째 블록을 만들어 전파한다. 
이 경우 네 번째 블록을 만든 c-노드는 세 번째 블랙 블록을 수신한 노드다. 
블랙라인은 세 번째 블랙 블록의 상위 해시를 가지고 있기 때문에 추가될 것이다.


그러나 세 번째 보라색 블록이 있는 노드는 네 번째 블랙 블록이 나중에 도착할 때 받을 수 없다. 
그것은 분명히 문제를 해결함으로써 만들어진 유효한 블록이고 블록의 높이를 따라 오는 네 번째 블록이라고 해도 받을 수 없다. 
왜냐하면 네 번째 블록의 부모 해시는 세 번째 보라색 블록이 아니라 검은 블록이기 때문이다.

그러면 세 번째 보라색 블록을 받은 노드는 그들이 가지고 있던 보라색 블록을 즉시 버리고 세 번째 블랙 블록부터 다시 다운로드한다. 
검은 선이 길어진다는 뜻이다. 
줄이 길수록 다음 블록으로 인식되어 블록체인(blockchain)에 추가될 가능성이 높다. 
이것이 가장 긴 사슬의 법칙이다. 
이러한 분업과 합병 과정은 매우 자연스러운 방식으로 진행된다.



그러나 이 규칙이 악의적으로 사용될 수 있는 영역이 있다. 
예를 들어, 내가 전체 컴퓨팅 파워의 51% 이상을 가지고 있다면, 나는 다른 마이너들보다 훨씬 더 빨리 파낼 수 있고 더 많은 블록을 생산할 수 있다. 분기 프로세스에서 생성한 라인을 계속할 수 있다는 의미다.


예를 들어, 세 번째 블록에서는 가지가 형성된다. 
검은 블록을 만들었고, 평소처럼 네 번째 블록을 기다려야 하는데, 다른 노드가 블록을 만들 때까지 기다릴 필요가 없고, 이 경우 블록을 만들고 추가할 수 있다. 강력한 해싱 파워는 블록을 더 빨리 만들 수 있게 해준다. 이렇게 해서 다른 노드로 선을 벌리지 않아도 되고, 계속 몰래 나만의 노드를 늘려간다. 
이 과정에서 내 블록의 특정 주소에 있는 거래를 무시하거나, 현금으로 바꾸기 위해 내 동전을 팔지 않았다는 것을 기록할 수 있다. 
여기 네트워크의 내 회선이 작동하는 곳이 있다. 
가지 끝에 가장 긴 선을 선택하여 블록체인(blockchain)에 블록을 추가하는 규칙이다. 즉, 내 라인이 이미 다른 회선에 비해 더 많은 블록을 가지고 있다면, 내 회선은 블록체인 네트워크에 "합법"으로 추가될 것이다. 따라서 이 규칙을 사용함으로써 네트워크를 혼돈시킬 가능성이 있으며, 이러한 일이 발생할 때마다 라인이 검증 단계를 더 오래 거쳐야 하기 때문에 최종에는 오랜 시간이 걸린다.